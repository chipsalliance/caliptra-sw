# Licensed under the Apache-2.0 license

[package]
name = "caliptra-x509"
version = "0.1.0"
edition = "2024"
build = "build/build.rs"

[lib]
doctest = false

[dependencies]
zeroize.workspace = true

[build-dependencies]
asn1 = { workspace = true, optional = true }
bitfield = { workspace = true, optional = true }
caliptra_common = { workspace = true, optional = true }
const-oid = { workspace = true, optional = true }
convert_case = { workspace = true, optional = true }
der = { workspace = true, optional = true }
ecdsa = { workspace = true, optional = true, features = [ "digest", "pem" ] }
ml-dsa = { workspace = true, optional = true }
hex = { workspace = true, optional = true }
openssl = { workspace = true, optional = true }
quote = { workspace = true, optional = true }
syn = { workspace = true, optional = true }
signature = { workspace = true, optional = true }
x509-cert = { workspace = true, optional = true, features = ["builder"] }
sha1 = { workspace = true, optional = true }
sha2 = { workspace = true, optional = true, features = ["oid"] }
p384 = { workspace = true, optional = true }
rand = { workspace = true, optional = true }
spki = { workspace = true, optional = true }

[dev-dependencies]
hex.workspace = true
openssl.workspace = true
x509-parser.workspace = true

[features]
default = ["std", "openssl"]
std = []
openssl = ["dep:openssl"]
rustcrypto = [
    "dep:const-oid",
    "dep:der",
    "dep:ecdsa",
    "dep:ml-dsa",
    "dep:p384",
    "dep:rand",
    "dep:sha2",
    "dep:signature",
    "dep:spki",
    "dep:x509-cert",
    "dep:sha1",
]
generate_templates = ["dep:asn1", "dep:bitfield", "dep:caliptra_common", "dep:convert_case", "dep:hex", "dep:quote", "dep:syn"]
